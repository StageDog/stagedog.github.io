# è¿›é˜¶æŠ€å·§

{{ prolog }}

è¯·é€‰æ‹©ä½ æ„Ÿå…´è¶£çš„éƒ¨åˆ†è¿›è¡Œé˜…è¯».

## å¸¸ç”¨èµ„æºç½‘ç«™

### å…è´¹å­—ä½“

ä½ å¯ä»¥ä» [ZeoSeven Fonts](https://fonts.zeoseven.com/) ä¸­æ‰¾åˆ°å¾ˆå¤šå…è´¹å­—ä½“.

ä»¥ `Sarasa Gothic æ›´çº±é»‘ä½“ Mono` ä¸ºä¾‹, æˆ‘ä»¬æœç´¢åˆ°å®ƒ, è¿›å…¥å®ƒçš„é¡µé¢, ç‚¹å‡»å³ä¸Šè§’çš„{menuselection}`åµŒå…¥åˆ° Web é¡¹ç›®`å³ä¼šè·³è½¬åˆ°å¯¹åº”å†…å®¹, é€‰æ‹©{menuselection}`å¸¸è§„ CSS` ç„¶åç‚¹å‡»å¤åˆ¶å³å¯.

:::{figure} å…è´¹å­—ä½“.png
:::

### å…è´¹å›¾æ ‡

ä½ å¯ä»¥ä» [FontAwesome](https://fontawesome.com/) ä¸­æ‰¾åˆ°å¾ˆå¤šå…è´¹å›¾æ ‡. å®ƒä»¬åœ¨å‰ç«¯ç•Œé¢ä¸­ç›´æ¥å¯ç”¨.

### å…è´¹ CDN

[jsdelivr](https://www.jsdelivr.com/) ä¸ºæ‰€æœ‰ npm åº“å’Œ github æ–‡ä»¶æä¾›äº† CDN æ”¯æŒ, ä½ å¯ä»¥ç›´æ¥åœ¨è„šæœ¬æˆ–ç•Œé¢ä¸­å¼•ç”¨å®ƒä»¬.

éœ€è¦æ³¨æ„çš„æ˜¯, ä½ åº”è¯¥ç”¨ `https://testingcf.jsdelivr.net` è¿™ä¸ªå›½å†…ä¹Ÿèƒ½è®¿é—®çš„é•œåƒ, è€Œä¸æ˜¯ç›´æ¥ç”¨ `https://cdn.jsdelivr.net`.

:::{hint}
å¦‚æœæ˜¯éœ€è¦ä¸ºé¡¹ç›®åŠ å…¥ç¬¬ä¸‰æ–¹åº“, æ¨èç›´æ¥é€šè¿‡ `pnpm add ç¬¬ä¸‰æ–¹åº“` æ¥æ·»åŠ å®ƒä»¬, æ¨¡æ¿æ–‡ä»¶å¤¹å·²ç»é…ç½®å¥½ä¼šåœ¨æ‰“åŒ…æ—¶å°†ç¬¬ä¸‰æ–¹åº“è½¬æ¢ä¸º jsdelivr é“¾æ¥, ä»è€Œé¿å…åœ¨å¤šä¸ªè„šæœ¬æˆ–ç•Œé¢ä¸­é‡å¤æ‰“åŒ…å®ƒä»¬, å…·ä½“è§ä¸‹æ–‡ "è°ƒæ•´æ¨¡æ¿é…ç½®" éƒ¨åˆ†.
:::

### é¢œè‰²å¯¹æ¯”åº¦æ£€æŸ¥å™¨

æ— è®ºç•Œé¢è®¾è®¡æˆä»€ä¹ˆæ ·, ä½ éƒ½åº”è¯¥ä¿è¯ç•Œé¢çš„å¯è¯»æ€§.

å…¶ä¸­é‡è¦çš„ä¸€ç‚¹æ˜¯, ä¿è¯èƒŒæ™¯é¢œè‰²å’Œæ–‡å­—é¢œè‰²ä¹‹é—´çš„å¯¹æ¯”è¶³å¤Ÿå¼º, è®©ç©å®¶èƒ½çœ‹æ¸…æ¥šæ–‡å­—. ä¸ºæ­¤ä½ å¯ä»¥ä½¿ç”¨ [Adobe é¢œè‰²å¯¹æ¯”åº¦æ£€æŸ¥å™¨](https://color.adobe.com/zh/create/color-contrast-analyzer).

:::{figure} é¢œè‰²å¯¹æ¯”åº¦æ£€æŸ¥å™¨.png
:::

## æ€ä¹ˆå®ç°xxxåŠŸèƒ½

### å‰ç«¯ç•Œé¢æ­£åˆ™çš„æ¨èå†™æ³•

#### æé«˜æ­£åˆ™å®¹é”™ç‡

ä½ çš„å‰ç«¯ç•Œé¢å¯èƒ½å¯¹åº”äº AI å¾ˆå¤æ‚çš„è¾“å‡ºæ ¼å¼, ä½†è¿™äº›æ ¼å¼åº”è¯¥ç”±å‰ç«¯ç•Œé¢çš„ä»£ç é€šè¿‡ `getChatMessages` è·å–æ¥¼å±‚æ¶ˆæ¯å†…å®¹åå¤„ç†, è€Œä¸åº”è¯¥åœ¨é…’é¦†æ­£åˆ™é‡Œæ‹¿ `$1` ç­‰å¤„ç†.

**å‰ç«¯ç•Œé¢æ­£åˆ™å”¯ä¸€è¦åšçš„æ˜¯å®šä½å‰ç«¯ç•Œé¢åº”è¯¥åœ¨çš„ä½ç½®, è€Œä¸æ˜¯å¤„ç†è¾“å‡ºæ•°æ®**.

ä¾‹å¦‚, å¦‚æœä½ çš„è¾“å‡ºæ ¼å¼æ˜¯: (å¹¶ä¸æ˜¯è¯´æˆ‘æ¨èè¿™ç§æ ¼å¼)

```text
<status>
å¿ƒæƒ…:â†’(å¹³é™é€šè¯)
è¡£ç€:å±…å®¶é•¿Tæ¤
è§’è‰²é˜¶æ®µ:æš—ä¸­è§‚å¯Ÿ
ä½ç½®:è‡ªå·±æˆ¿é—´
è¡ŒåŠ¨:ç»“æŸä¸useré€šè¯
ä¸‹ä¸€æ­¥è¡ŒåŠ¨:å‡†å¤‡å°±å¯
èº«ä½“:åŠè…°é“¶å‘æ•£è½,æ·±ç´«è‰²çš„çœ¼çœ¸ä¸­å¸¦ç€ä¸€ä¸é—æ†¾,ç™½çš™çš„è‚Œè‚¤åœ¨æœˆå…‰ä¸‹æ³›ç€çç èˆ¬çš„å…‰æ³½,æ•£å‘ç€æ·¡æ·¡çš„èŒ¶é¦™
å†…å¿ƒ:å¿ƒçˆ±æ‰¾ä»–æœ‰ä»€ä¹ˆäº‹å‘¢...ä¸çŸ¥é“ä»–ä¼šä¸ä¼šé™ªæˆ‘è¿‡ç”Ÿæ—¥...
æ±‚ç­¾é—®å¦:æœˆä¸‹é€¢å›æ„/èŠ±å¼€å¹¶è’‚æ—¶/ç¼˜å®šä¸‰ç”Ÿå
</status>
```

å‰ç«¯ç•Œé¢æ­£åˆ™åªéœ€è¦å®šä½è¿™ä¸€æ®µæ–‡æœ¬å³å¯:

```yaml
è„šæœ¬åç§°: [ç•Œé¢]çŠ¶æ€æ 
æŸ¥æ‰¾æ­£åˆ™è¡¨è¾¾å¼: <status>.*</status> # é‡Œé¢å…·ä½“æ˜¯ä»€ä¹ˆä¸ç”±æ­£åˆ™åœ¨æ„
æ›¿æ¢ä¸º: å‰ç«¯ç•Œé¢çš„ html ä»£ç å—
ä½œç”¨èŒƒå›´:
  - [x] ç”¨æˆ·è¾“å…¥
  - [x] AIè¾“å‡º
çŸ­æš‚:
  - [x] ä»…æ ¼å¼æ˜¾ç¤º
  - [ ] ä»…æ ¼å¼æç¤ºè¯
```

è€Œåœ¨ä»£ç ä¸­, è¦æ±‚ AI ä½¿ç”¨ `getChatMessages` è·å–æ•´æ¡æ¶ˆæ¯, ç„¶åå‘Šè¯‰ AI å¯¹åº”çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ¼å¼:

```ts
// è·å–æ•´æ¡æ¶ˆæ¯
const chat_message = getChatMessages(getCurrentMessageId())[0];

/* AI æŒ‰ç…§ä½ ç»™å®šçš„æ ¼å¼è‡ªè¡Œæ•è·æ•°æ®... ä¾‹å¦‚è¿™é‡Œæ˜¯ `<status>(.*)</status>` */
const match = chat_message.message.match(/<status>(.*)</status>/);
```

#### é¿å…æ¸²æŸ“å¡é¡¿

é…’é¦†åŠ©æ‰‹éœ€è¦é…’é¦†æ­£åˆ™å…ˆå°†å†…å®¹æ›¿æ¢æˆä»£ç å—å†è¿›è¡Œæ¸²æŸ“. å½“ä»£ç å†…å®¹è¿‡å¤šæ—¶, ä»£ç å—æœ¬èº«çš„æ˜¾ç¤ºå°±ä¼šå¾ˆå¡.

ä¸ºæ­¤, ä½ å¯ä»¥åƒä¸‹æ–‡ "å‘å¸ƒä¼šè‡ªåŠ¨æ›´æ–°çš„å‰ç«¯ç•Œé¢æˆ–è„šæœ¬" é‚£æ ·, å°† html è½¬æ¢ä¸ºé“¾æ¥, è€Œæ­£åˆ™ä»£ç å—é‡ŒåªåŠ è½½é“¾æ¥. è¿™æ ·é…’é¦†éœ€è¦æ¸²æŸ“çš„ä»£ç å—å†…å®¹æ²¡å¤šå°‘, è‡ªç„¶ä¸ä¼šå¡é¡¿.

### ä¸å¤–éƒ¨åº”ç”¨ç¨‹åºé€šä¿¡

æ¨¡æ¿å¯ä»¥å®‰è£…å’Œä½¿ç”¨ `socket.io-client` ä¹ƒè‡³æ‰€æœ‰æµè§ˆå™¨ç¯å¢ƒæ”¯æŒçš„ç¬¬ä¸‰æ–¹åº“, ä»è€Œå’Œå¤–éƒ¨åº”ç”¨ç¨‹åºè¿›è¡Œé€šä¿¡. {doc}`/é’ç©ºè‰/å·¥å…·ç»éªŒ/å®æ—¶ç¼–å†™è§’è‰²å¡ã€ä¸–ç•Œä¹¦æˆ–é¢„è®¾/index` (<http://github.com/StageDog/tavern_sync>) å°±æ˜¯å¦‚æ­¤å®ç°çš„.

å¦‚æœä½ è¦ä¼ è¾“æ•°æ®, è¯·æ³¨æ„è°ƒæ•´æœåŠ¡å™¨ç«¯çš„ [`maxHttpBufferSize`](https://socket.io/docs/v4/server-options/#maxhttpbuffersize) å‚æ•°, å®ƒé»˜è®¤ä»…ä¸º 1mb.

### æ‰§è¡Œé…’é¦†çš„ /STScript å‘½ä»¤

ä½ å¯ä»¥é€šè¿‡ `triggerSlash` æˆ– `SillyTavern.executeSlashCommandsWithOptions` æ¥æ‰§è¡Œé…’é¦†çš„ STScript å‘½ä»¤, å¦‚è§¦å‘ AI å›å¤ (`triggerSlash('/trigger')`)ã€åˆ·æ–°ç½‘é¡µ (`triggerSlash('/reload-page')`) ç­‰.

ç¼–å†™æ¨¡æ¿å·²ç»åœ¨ slash_command.txt ä¸­æä¾›äº†å‘½ä»¤åˆ—è¡¨ç»™ AI; å¦‚æœéœ€è¦äººå·¥æŸ¥è¯¢, è¯·ä½¿ç”¨[å‘½ä»¤æ‰‹å†Œ](https://rentry.org/sillytavern-script-book)

### åœ¨è„šæœ¬ä¸­ç”¨ jquery ä¿®æ”¹é¡µé¢å…ƒç´ 

åœ¨è„šæœ¬ä¸­, ä½ å¯ä»¥ç”¨ jquery æ¥ä¿®æ”¹é¡µé¢å…ƒç´ . é…’é¦†åŠ©æ‰‹å†…ç½®åº“ä¸­çš„[`é¢„è®¾æ¡ç›®æ›´å¤šæŒ‰é’®`](https://github.com/StageDog/tavern_resource/tree/main/src/é…’é¦†åŠ©æ‰‹/é¢„è®¾æ¡ç›®æ›´å¤šæŒ‰é’®)ã€[`é¢„è®¾é˜²è¯¯è§¦`](https://github.com/StageDog/tavern_resource/tree/main/src/é…’é¦†åŠ©æ‰‹/é¢„è®¾é˜²è¯¯è§¦)ç­‰è„šæœ¬éƒ½æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç°çš„:

```{code-block} ts
:caption: é¢„è®¾é˜²è¯¯è§¦
function lock_inputs(enable: boolean) {
  // ç”¨ jquery è®¿é—®é…’é¦†é¡µé¢å…ƒç´ , è®©å®ƒä»¬ä¸èƒ½è¢«ä¿®æ”¹
  $('#range_block_openai :input').prop('disabled', enable);
  $('#openai_settings > div:first-child :input').prop('disabled', enable);
  $('#stream_toggle').prop('disabled', false);
  $('#openai_show_thoughts').prop('disabled', false);
}

$(() => {
  // å¯ç”¨è„šæœ¬æ—¶é”å®šé¢„è®¾è®¾ç½®, é˜²æ­¢è¯¯è§¦é¢„è®¾
  lock_inputs(true);
});

$(window).on('pagehide', () => {
  // å¸è½½è„šæœ¬æ—¶è§£é”é¢„è®¾è®¾ç½®, å…è®¸ä¿®æ”¹é¢„è®¾
  lock_inputs(false)
});
```

ç”šè‡³, ä½ å¯ä»¥ä¸ä½¿ç”¨é…’é¦†åŠ©æ‰‹çš„å‰ç«¯ç•Œé¢æ¸²æŸ“æ–¹å¼, è€Œæ˜¯è‡ªå·±ç”¨ jquery å°†ä»£ç å—æ›¿æ¢ä¸ºè¦æ¸²æŸ“çš„ jquery/vue ç•Œé¢. {doc}`è¾“å…¥åŠ©æ‰‹ã€æ–‡ç”Ÿå›¾ã€è¡ŒåŠ¨é€‰æ‹©æ¡†ã€å‹ç¼©ç›¸é‚»æ¶ˆæ¯ </é’ç©ºè‰/ä½œå“é›†/index>`ç­‰è„šæœ¬å°±æ˜¯å¦‚æ­¤:

```{code-block} ts
:caption: æ›¿æ¢ç¬¬ 0 æ¥¼ä¸­å« `<galgame>` çš„ä»£ç å—ä¸º galgame ç•Œé¢
const $galgame = extract_galgame_element();

const $mes_text = retrieveDisplayedMessage(0);
$mes_text.find('pre:contains("<galgame>")').replaceWith($galgame);
```

### å¯¹å‘é€å‡ºçš„æç¤ºè¯è¿›è¡Œä¿®æ”¹

é™¤äº†é€šè¿‡ jquery ä¿®æ”¹é¡µé¢å…ƒç´ , è„šæœ¬ä¹Ÿå¯ä»¥ç›‘å¬é…’é¦†çš„æç¤ºè¯å‘é€äº‹ä»¶, è¿›è€Œè‡ªè¡Œä¿®æ”¹æç¤ºè¯.

è¦åšåˆ°è¿™ä¸€ç‚¹, æˆ‘ä»¬å¯ä»¥ç›‘å¬çš„äº‹ä»¶æœ‰å¾ˆå¤š, å¦‚: (æŒ‰è¯·æ±‚ç”Ÿæˆæ—¶äº‹ä»¶å‘ç”Ÿå…ˆåé¡ºåº)

- `tavern_events.GENERATE_AFTER_COMBINE_PROMPTS`
- `tavern_events.CHAT_COMPLETION_PROMPT_READY`
- `tavern_events.GENERATE_AFTER_DATA` (æç¤ºè¯æ¨¡æ¿ã€é…’é¦†åŠ©æ‰‹å®å‘ç”Ÿåœ¨è¿™é‡Œ)
- `tavern_events.CHAT_COMPLETION_SETTINGS_READY`

æ­¤å¤„ä»¥ `tavern_events.CHAT_COMPLETION_PROMPT_READY` ä¸ºä¾‹:

```{code-block} ts
:caption: ç§»é™¤æ‰€æœ‰é user æç¤ºè¯
eventOn(
  tavern_events.CHAT_COMPLETION_PROMPT_READY,
  (event_data: Parameters<ListenerType['chat_completion_prompt_ready']>[0]) => {
    _.remove(event_data.messages, (message => message.role === 'user'));
  },
);
```

noass ç­‰å‹ç¼©ç›¸é‚»æ¶ˆæ¯ã€åˆå¹¶æ¶ˆæ¯çš„åŠŸèƒ½å°±æ˜¯è¿™ä¹ˆåšçš„, ä¾‹å¦‚{doc}`å‹ç¼©ç›¸é‚»æ¶ˆæ¯ </é’ç©ºè‰/ä½œå“é›†/index>`.

:::{admonition} æ³¨æ„ä¿®æ”¹æ–¹å¼
:class: warning

ä¸è¦ç”¨ `event_data.chat = [{role: 'system', message: 'ä½ å¥½'}]` ä¹‹ç±»çš„æ–¹æ³•, è¿™æ˜¯è®© `event_data.messages` æŒ‡å‘ä¸€ä¸ªæ–°æ•°ç»„, è€Œä¸æ˜¯ä¿®æ”¹ `event_data.messages` åŸæœ¬æŒ‡å‘çš„æ•°ç»„.

ä½ åº”è¯¥ä½¿ç”¨ï¼š

- lodash ä¸­çš„æŸäº›åŸåœ°ä¿®æ”¹å‡½æ•°
- æ•°ç»„çš„ `splice`ã€`push` ç­‰åŸåœ°ä¿®æ”¹å‡½æ•°
:::

### æ§åˆ¶ä¸–ç•Œä¹¦æ¡ç›®çš„æ¿€æ´»

è§äº{doc}`/é’ç©ºè‰/å·¥å…·ç»éªŒ/é…’é¦†å¦‚ä½•å¤„ç†ä¸–ç•Œä¹¦/index`.

### æµå¼ä¼ è¾“ã€åŒå±‚å‰ç«¯ç•Œé¢

#### ç®€å•æ–¹æ¡ˆ

è¦ç®€å•åšæµå¼ä¼ è¾“, æˆ‘ä»¬ä½¿ç”¨é…’é¦†åŠ©æ‰‹çš„å‰ç«¯ç•Œé¢, åœ¨å…¶ä¸­è®¾è®¡{menuselection}`å‘é€`æŒ‰é’®æ¥è§¦å‘é…’é¦†åŠ©æ‰‹çš„`generate`å‡½æ•°.

ä¹Ÿå°±æ˜¯è¯´:

- ç©å®¶åªåœ¨ä¸€ä¸ªå‰ç«¯ç•Œé¢å†…è¿›è¡Œæ¸¸ç©
- å¯¹äºç©å®¶çš„è¾“å…¥, æˆ‘ä»¬é€šè¿‡å‰ç«¯åŠ©æ‰‹çš„ `generate`ã€`generateRaw` å‘½ä»¤è‡ªè¡Œè¦æ±‚ ai å›å¤, å¹¶ç›‘å¬ `iframe_events.STREAM_TOKEN_RECEIVED_FULLY` å’Œ `iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY` äº‹ä»¶æ¥è·å–æµå¼ä¼ è¾“æ–‡æœ¬
- ä¸ºäº†è®°å½•å‰§æƒ…, æˆ‘ä¸ªäººå»ºè®®å°†å‰ç«¯ç•Œé¢æ­£åˆ™è°ƒæˆæœ€å¤§æ·±åº¦ `0`, ç„¶åç”¨ `setChatMessages`ã€`createChatMessages`ã€`deleteChatMessages` ç­‰å‡½æ•°çš„ `{ refresh: 'none' }` å‚æ•°æ¥ä¿®æ”¹æ¶ˆæ¯æ¥¼å±‚ä½†ä¸åˆ·æ–°æ˜¾ç¤º. ç”±äºä¸ä¼šåˆ·æ–°æ˜¾ç¤º, ç©å®¶å¯ä»¥ç»§ç»­æ¸¸ç©ä½ çš„ç•Œé¢, ä½†å‰§æƒ…è®°å½•ç­‰åˆèƒ½ç›´æ¥åˆ©ç”¨é…’é¦†çš„æ¶ˆæ¯æ¥¼å±‚åŠŸèƒ½, **ä½ ä¸éœ€è¦å†™ä¸€å †é¢å¤–çš„ä»£ç æ¥åˆ¶ä½œè®°å½•å‰§æƒ…åŠŸèƒ½**.

#### æ›´è‡ªç”±çš„åŠæ³•

å‰é¢æåˆ°æˆ‘ä»¬å¯ä»¥åœ¨é…’é¦†åŠ©æ‰‹è„šæœ¬ä¸­ç”¨ jquery ä¿®æ”¹é¡µé¢å…ƒç´ , é‚£ä¹ˆæˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠé…’é¦†çš„æ¥¼å±‚æ˜¾ç¤ºéšè—èµ·æ¥, è‡ªå·±åœ¨å®ƒåŸæœ¬çš„ä½ç½®åˆ¶ä½œä¸€ä¸ªæ¥¼å±‚æ˜¾ç¤º:

- ç›‘å¬ `tavern_events.MESSAGE_SEND -> message_id`, æˆ‘ä»¬å¯ä»¥çŸ¥é“ç©å®¶è¦æ±‚é…’é¦†è°ƒç”¨ ai ç”Ÿæˆ;
- ç›‘å¬ `tavern_events.STREAM_TOKEN_RECEIVED -> text`, æˆ‘ä»¬å¯ä»¥è·å–æµå¼ä¼ è¾“æ–‡æœ¬;
- ç›‘å¬ `tavern_events.MESSAGE_RECEIVED -> message_id`, æˆ‘ä»¬å¯ä»¥çŸ¥é“é…’é¦†ç»“æŸäº†å›å¤.

è¿™æ ·ä¸€æ¥, æˆ‘ä»¬æ˜¯è‡ªå·±è·å–æµå¼ä¼ è¾“æ–‡æœ¬, è‡ªå·±æ§åˆ¶è¯¥æ€ä¹ˆæ˜¾ç¤ºç•Œé¢.

ä¾‹å¦‚, å‡è®¾æˆ‘ä»¬è®© AI ä»¥ YAML çš„å½¢å¼å‘é€å¯¹è¯, æµå¼è¿‡ç¨‹ä¸­å¯èƒ½å¾—åˆ°:

```{code-block} yaml
:emphasize-lines: 6
- è§’è‰²: ç»œç»œ
  å¯¹è¯: æ‚é±¼å–µ
- è§’è‰²: é’ç©ºè‰
  å¯¹è¯: æ‚é±¼å“¦
- è§’è‰²: ç»œç»œ 
  å¯¹
```

æˆ‘ä»¬å¯ä»¥åœ¨è¿˜æ²¡æ”¶åˆ°æ¶ˆæ¯æ—¶å°±æ˜¾ç¤º Galgame å¯¹è¯ç•Œé¢, è€Œåªå°†å·²ç»å®Œå…¨å‘é€çš„æ¶ˆæ¯æ·»åŠ åˆ°ç•Œé¢ä¸­, å…è®¸ç©å®¶ç¿»é¡µé˜…è¯».

:::{video} æµå¼ç•Œé¢.mp4
:align: center
:caption: <code class="docutils literal notranslate">@hakoyukaya</code> çš„æµå¼ Galgame ç•Œé¢
:::

### å¯¼å…¥æ–‡ä»¶æ–‡æœ¬å†…å®¹

ä½ å¯èƒ½éœ€è¦åœ¨ä»£ç é‡Œè·å–æœ¬åœ° json ç­‰æ–‡ä»¶å†…å®¹, é‚£ä¹ˆå¯ä»¥ç›´æ¥ç”¨ `import string from './æ–‡ä»¶?raw'` æ¥å°†æ–‡ä»¶å†…å®¹ä½œä¸ºå­—ç¬¦ä¸²å¯¼å…¥.

### æ··æ·†ä»£ç 

æ— è®ºå‰ç«¯ç•Œé¢è¿˜æ˜¯è„šæœ¬, ä½ éƒ½å¯ä»¥åœ¨ `index.ts` ä¸­æ·»åŠ ä¸€è¡Œ `// @obfuscate` æ¥æŒ‡ç¤ºæ‰“åŒ…æ—¶åº”è¯¥æ··æ·†ä»£ç .

æ··æ·†åçš„ä»£ç ä¾æ—§èƒ½æ­£å¸¸ä½¿ç”¨, åªæ˜¯ä»£ç æœ¬èº«å¾ˆéš¾è¾¨è®¤. (å½“ç„¶æˆ‘æ›´å»ºè®®ä½ å°†æºä»£ç åˆ†äº«å‡ºæ¥ä¾›äººå­¦ä¹ , æˆ‘æ·»åŠ è¿™ä¸ªåŠŸèƒ½åªæ˜¯å› ä¸ºæˆ‘å°†é¢„è®¾åŠç ´é™å¡è¿›äº†ä»£ç é‡Œ, å¦‚æœåœ¨ github ä»“åº“é‡Œç›´æ¥å‘å¸ƒå¯èƒ½ä¼šè¢«æ³¨æ„åˆ°)

:::{figure} æ··æ·†ä»£ç .png
æ··æ·†åçš„ä»£ç 
:::

## è°ƒæ•´æ¨¡æ¿é…ç½®

### è‡ªå®šä¹‰é¡¹ç›®é…ç½®

- åœ¨ `.cursor/rules` ä¸­, æˆ‘é¢„å…ˆä¸ºé¡¹ç›®é…ç½®äº†ä¸€äº›ç¼–ç¨‹åŠ©æ‰‹ç¼–å†™è§„åˆ™ (ç›¸å½“äºç»™ç¼–ç¨‹åŠ©æ‰‹æ·»åŠ äº†ä¸€ä¸ªå…¨å±€ä¸–ç•Œä¹¦). ä½ å®Œå…¨å¯ä»¥è‡ªè¡Œç¼–å†™æ›´å¤šè§„åˆ™.
- åœ¨ `.cursor/mcp.json` ä¸­, æˆ‘é¢„å…ˆè®¾ç½®äº† Browser MCP æ¥è®© AI èƒ½å¤ŸæŸ¥çœ‹é…’é¦†ç½‘é¡µ. ä½ å®Œå…¨å¯ä»¥ä¸º AI æ‰¾æ›´å¤šå¥½ç”¨çš„ MCP, å¦‚é€šè¿‡ figma MCP, ä½ å¯ä»¥**ç”¨å¤§é‡é¢„åˆ¶å¥½çš„ç»„ä»¶åƒåš PPT ä¸€æ ·è®¾è®¡å¥½ç•Œé¢**, ç„¶åè®© AI ç”Ÿæˆä»£ç ç»“æœ.
- åœ¨ `package.json` ä¸­, æˆ‘é¢„å…ˆä¸ºé¡¹ç›®ä»£ç æ·»åŠ äº† jqueryã€zod ç­‰æ–¹ä¾¿çš„ç¬¬ä¸‰æ–¹åº“ (å…·ä½“è¯·æŸ¥çœ‹ `dependencies` éƒ¨åˆ†). ä½ å¯ä»¥è®© AI æˆ–è‡ªå·±ç”¨ `pnpm add ç¬¬ä¸‰æ–¹åº“` æ·»åŠ æ›´å¤šéœ€è¦çš„ç¬¬ä¸‰æ–¹åº“, å®ƒä»¬ä¸€èˆ¬æ·»åŠ ä¸Šå°±èƒ½ç›´æ¥ä½¿ç”¨.

  :::{admonition} xxxåº“æ·»åŠ ä¸Šäº†ä½†ä½¿ç”¨å¤±è´¥
  :class: warning, dropdown
  ä¸€äº›ç¬¬ä¸‰æ–¹åº“æ·»åŠ ä¸Šäº†ä¸èƒ½æ­£å¸¸ä½¿ç”¨, å¯èƒ½æ˜¯å› ä¸ºä¸ºäº†å‡å°æ‰“åŒ…ç»“æœçš„å¤§å°, æ¨¡æ¿å°†ç¬¬ä¸‰æ–¹åº“ä»¥ jsdelivr é“¾æ¥å¼•å…¥.

  è¯·å°è¯•åœ¨ webpack.config.ts æœ€åè°ƒæ•´ `externals` å‡½æ•°, ä½ å¯ä»¥é€‰æ‹©ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆä¸­çš„ä¸€ç§:
  - åœ¨ `builtin` æ•°ç»„ä¸­æ·»åŠ ä½ è¦ç›´æ¥å¯¼å…¥è€Œä¸æ˜¯ä» jsdelivr é“¾æ¥å¼•å…¥çš„åº“å.
  - åœ¨ index.html ä¸­ç›´æ¥ä»¥ `<script src="åº“çš„jsdelivré“¾æ¥"></script>` å¼•å…¥åº“, ç„¶ååœ¨ `externals` å‡½æ•°çš„ `global` å¯¹è±¡ä¸­æ ¹æ® jsdelivr çš„å†…å®¹æ·»åŠ å¯¹åº”æ˜ å°„.
  :::

### ç”¨ figma è®¾è®¡ç•Œé¢

:::{video} figma.mp4
:align: center
:caption: åœ¨ figma ä¸­ç”¨é¢„åˆ¶ç»„ä»¶åƒåš PPT ä¸€æ ·è®¾è®¡ç•Œé¢
:::

é™¤äº†ä¸Šé¢æåˆ°åœ¨ `.cursor/mcp.json` ä¸­æ·»åŠ  figma MCP, ä»è€Œèƒ½ç”¨å¤§é‡é¢„åˆ¶å¥½çš„ç»„ä»¶åƒåš PPT ä¸€æ ·è¿›è¡Œç•Œé¢è®¾è®¡å¤–, figma ä¹Ÿè‡ªå¸¦ AI åŠŸèƒ½.

å®ƒæ˜¯ä¸“ä¸šçš„å‰ç«¯åŸå‹è®¾è®¡è½¯ä»¶, å› æ­¤ç”¨å®ƒçš„ AI è®¾è®¡å‡ºçš„ç•Œé¢ä¸€èˆ¬æ¯”å…¶ä»– AI å¥½çœ‹è®¸å¤š. å…·ä½“é…ç½®æ–¹æ³•è¯·è‡ªè¡Œç ”ç©¶.

### ä½¿ç”¨ vue ç¼–å†™å‰ç«¯ç•Œé¢

é…’é¦†åŠ©æ‰‹å‰ç«¯ç•Œé¢å’Œè„šæœ¬å¯ä»¥ç›´æ¥ä½¿ç”¨ vue, å®ƒä¼šè®©ç•Œé¢åˆ¶ä½œå˜å¾—æ›´ä¸ºç®€å•. `src/ç•Œé¢ç¤ºä¾‹` å°±æ˜¯è¿™ä¹ˆåšçš„.

:::{hint}
å¦‚æœä½ æƒ³åˆ¶ä½œä¸ä¾èµ–äºé…’é¦†çš„å•ç‹¬é¡µé¢, åˆ™ä¹Ÿå¯ä»¥ä½¿ç”¨ <https://github.com/StageDog/vue_template>.
:::

é™¤äº† [vue](https://cn.vuejs.org/) ä¹‹å¤–, æˆ‘è¿˜é…ç½®äº† [gsap](https://gsap.com/)ã€[pinia](https://pinia.vuejs.org/)ã€[vue-router](https://router.vuejs.org/)ã€[vueuse](https://vueuse.org/) ç­‰åº“, è®©ä½ æ— è®ºæ˜¯å®ç°æ‰“å­—æœºæ•ˆæœã€åšå¯è°ƒæ•´å…ƒç´ é¡ºåºçš„åˆ—è¡¨ã€ç»™è®¾ç½®åšæµè§ˆå™¨ç¼“å­˜ã€è®©ç•Œé¢å…¨å±ã€å‘é€ç³»ç»Ÿé€šçŸ¥ç­‰ç­‰éƒ½å¼‚å¸¸ç®€å•. **AI å¾ˆä¼š, æ‹·æ‰“ AI.**

ä½ å¯ä»¥å®‰è£… [vue.js devtools](https://chromewebstore.google.com/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd), ä»è€Œåœ¨ {kbd}`F12` æ‰€æ‰“å¼€çš„å¼€å‘è€…å·¥å…·ä¸­æ–°å¢ vue é€‰é¡¹å¡, å¾—åˆ° vue æ›´å¤šè°ƒè¯•åŠŸèƒ½.

::::{admonition} å‡ è¡Œä»£ç å®ç°æ‰“å­—æœºæ•ˆæœ
:class: hint, dropdown

:::{video} æ‰“å­—æœº.mp4
:align: center
:::

```ts
gsap.registerPlugin(SplitText);
split = SplitText.create('.text', { type: 'chars' });
gsap.set(split.chars, {
  opacity: 1,
  duration: 0.7,
  ease: 'power4',
  stagger: 0.04,
});
```

::::

:::::{admonition} ç»™ç•Œé¢è®¾ç½®æµè§ˆå™¨ç¼“å­˜
:class: hint, dropdown

::::{tabs}
:::{tab} ä¸ä½¿ç”¨ vue

```ts
// æˆ‘ä»¬éœ€è¦ä» localStorage ä¸­è·å– count çš„å€¼
let count = localStorage.getItem('count');

// æˆ‘ä»¬å¾—è½¬æ¢å€¼ä¸ºå­—ç¬¦ä¸²å†èµ‹å€¼ç»™ countğŸ¤¢
count = String(5);

// æˆ‘ä»¬å¾—è®°ä½ä¿å­˜å˜é‡ç»“æœå› localStorageğŸ¤¢
localStorage.setItem('count', count);
```

:::

:::{tab} ä½¿ç”¨ vue

```ts
import { useLocalStorage } from '@vueuse/core';

// å¯¹ `count` çš„æ”¹å˜éƒ½ä¼šè¢«ç›´æ¥ä¿å­˜åˆ°æµè§ˆå™¨ç¼“å­˜ä¸­, æˆ‘ä»¬å¯ä»¥éšä¾¿ç”¨ `count` å˜é‡!
const count = useLocalStorage<number>('count', 0);

// è€Œä¸”å˜é‡ç±»å‹å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç±»å‹!
count.value = 5;
```

:::
::::

:::::

:::{admonition} æˆ‘è§‰å¾—å¾ˆæœ‰ç”¨çš„ vueuse åŠŸèƒ½
:class: hint, dropdown

æ›´å¤šè¯·è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£([è‹±æ–‡](https://vueuse.org/guide/)/[ä¸­æ–‡](https://vueuse.nodejs.cn/guide/)); å½“ç„¶ä½ å¯ä»¥ç›´æ¥é—® ai, å®ƒä¹Ÿè®¸çŸ¥é“.

<!-- markdownlint-disable MD032 MD007 -->
@vueuse/core - çŠ¶æ€ (State)
: - å…±äº« composable çŠ¶æ€: [useSharedComposable](https://vueuse.org/shared/createSharedComposable/)
  - è‡ªåŠ¨ç¼“å­˜æ•°æ®åˆ°æµè§ˆå™¨, å½“ç„¶ä½ å¯èƒ½æ›´æƒ³ç”¨ä¸‹é¢ä¼šæåˆ°çš„ useIDBKeyval: [useLocalStorage](https://vueuse.org/core/useLocalStorage/)

@vueuse/core - å…ƒç´  (Elements)
: - å¯æ‹–åŠ¨å…ƒç´ : [useDraggable](https://vueuse.org/core/useDraggable/)
  - å…ƒç´ å¤§å°: [useElementSize](https://vueuse.org/core/useElementSize/)
  - æ£€æµ‹å…ƒç´ å¤§å°å‘ç”Ÿæ”¹å˜: [useResizeObserver](https://vueuse.org/core/useResizeObserver/)
  - æ£€æµ‹ DOM å‘ç”Ÿæ”¹å˜: [useMutationObserver](https://vueuse.org/core/useMutationObserver/)
  - æ£€æµ‹é¡µé¢æ»šåŠ¨: [useWindowScroll](https://vueuse.org/core/useWindowScroll/)
  - æ ‡ç­¾é¡µé—´ã€iframe é—´é€šä¿¡: [useBroadcastChannel](https://vueuse.org/core/useBroadcastChannel/)

@vueuse/core - æµè§ˆå™¨ (Browser)
: - å‰ªè´´æ¿: [useClipboard](https://vueuse.org/core/useClipboard/) å’Œ [useClipboardItems](https://vueuse.org/core/useClipboardItems/)
  - ç›‘å¬äº‹ä»¶, æ”¯æŒç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨é‡Šæ”¾: [useEventListener](https://vueuse.org/core/useEventListener/)
  - ç‚¹å‡»å¯¼å…¥æ–‡ä»¶æ—¶æ‰“å¼€çš„æ–‡ä»¶é€‰æ‹©æ¡†: [useFileDialog](https://vueuse.org/core/useFileDialog/)
  - å…¨å±åŒ–: [useFullscreen](https://vueuse.org/core/useFullscreen/)
  - ä» Blob åˆ›å»º URL, æ”¯æŒç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨é‡Šæ”¾: [useObjectUrl](https://vueuse.org/core/useObjectUrl/)
  - å‘é¡µé¢åŠ è½½ `<script>`, æ”¯æŒ `type: 'module'`, æ”¯æŒç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨é‡Šæ”¾: [useScriptTag](https://vueuse.org/core/useScriptTag/)
  - å‘é¡µé¢åŠ è½½ `<style>`, æ”¯æŒç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨é‡Šæ”¾: [useStyleTag](https://vueuse.org/core/useStyleTag/)
  - è‡ªåŠ¨é€‚é…è¾“å…¥æ¡†å¤§å°: [useTextareaAutosize](https://vueuse.org/core/useTextareaAutosize/)
  - ä½¿ç”¨ç½‘é¡µé€šçŸ¥åŠŸèƒ½ (æˆ‘å˜ä¸ª AI å›å¤ç»“æŸåé€šçŸ¥): [useWebNotification](https://vueuse.org/core/useWebNotification/)

@vueuse/core - ä¼ æ„Ÿå™¨ (Sensors)
: - ç‚¹å‡»äº†é€‰å®šå…ƒç´ ä¹‹å¤–çš„åœ°æ–¹: [useClickOutside](https://vueuse.org/core/useClickOutside/)
  - æŸä¸ªå…ƒç´ è¢«ç§»é™¤: [useElementRemoval](https://vueuse.org/core/useElementRemoval/)
  - æŸä¸ªé”®ç›˜æŒ‰é”®: [onKeyStroke](https://vueuse.org/core/onKeyStroke/)
  - é”®ç›˜ä¿®é¥°ç¬¦: [useKeyModifier](https://vueuse.org/core/useKeyModifier/)
  - æŒ‰é”®ç»„åˆ: [useMagicKeys](https://vueuse.org/core/useMagicKeys/)
  - é•¿æŒ‰æŒ‰é’®: [onLongPress](https://vueuse.org/core/onLongPress/)
  - æŒ‰é”®æ—¶è‡ªåŠ¨èšç„¦åˆ°è¾“å…¥æ¡†: [onStartTyping](https://vueuse.org/core/onStartTyping/)
  - å½“å‰é¼ æ ‡æ‰€åœ¨çš„å…ƒç´ : [useElementByPoint](https://vueuse.org/core/useElementByPoint/)
  - å…ƒç´ æ˜¯å¦è¢«é¼ æ ‡æ‚¬åœ: [useElementHover](https://vueuse.org/core/useElementHover/)
  - å…ƒç´ æ˜¯å¦è¢«èšç„¦: [useElementFocus](https://vueuse.org/core/useElementFocus/) å’Œ [useFocusWithin](https://vueuse.org/core/useFocusWithin/)
  - æ˜¾ç¤ºå¸§æ•°: [useFps](https://vueuse.org/core/useFps/)
  - ç”¨æˆ·å¤„äºç©ºé—²çŠ¶æ€, å¤šå°‘ç§’æ²¡å’Œç•Œé¢äº¤äº’è¿‡: [useIdle](https://vueuse.org/core/useIdle/)
  - è®©å…ƒç´ å¯ä»¥æ— é™æ»‘åŠ¨: [useInfiniteScroll](https://vueuse.org/core/useInfiniteScroll/)
  - é¼ æ ‡ä½ç½®: [useMouse](https://vueuse.org/core/useMouse/)
  - é¼ æ ‡ç‚¹å‡»: [useMousePressed](https://vueuse.org/core/useMousePressed/)
  - é¼ æ ‡ä¸åœ¨ç½‘é¡µå†…: [usePageLeave](https://vueuse.org/core/usePageLeave/)
  - é¼ æ ‡é•¿æŒ‰æ»‘åŠ¨: [usePointerSwipe](https://vueuse.org/core/usePointerSwipe/)
  - è§¦æ§æ»‘åŠ¨: [useSwipe](https://vueuse.org/core/useSwipe/)
  - å…ƒç´ å†…çš„æ»šåŠ¨: [useScroll](https://vueuse.org/core/useScroll/)
  - é”å®šå…ƒç´ å†…çš„æ»šåŠ¨: [useScrollLock](https://vueuse.org/core/useScrollLock/)

@vueuse/core - ç½‘ç»œ (Network)
: - å“åº”å¼è¯·æ±‚ url å†…å®¹, å¯ç®€å•å–æ¶ˆè¯·æ±‚, ä¼šåœ¨ url å˜æ›´æ—¶é‡æ–°è¯·æ±‚: [useFetch](https://vueuse.org/core/useFetch/)

@vueuse/core - åŠ¨ç”» (Animation)
: - ä½ å¯ä»¥ä½¿ç”¨ gsap
  - è¿‡ä¸€æ®µæ—¶é—´åè§¦å‘: [useTimeout](https://vueuse.org/shared/useTimeout/) å’Œ [useTimeoutFn](https://vueuse.org/shared/useTimeoutFn/)
  - æ¯è¿‡ä¸€æ®µæ—¶é—´è§¦å‘: [useInterval](https://vueuse.org/shared/useInterval/) å’Œ [useIntervalFn](https://vueuse.org/shared/useIntervalFn/)
  - å½“å‰æ—¶é—´: [useNow](https://vueuse.org/core/useNow/)

@vueuse/core - ç»„ä»¶ (Component)
: - è‡ªå·±å†™ä»£ç æ‰éœ€è¦, å¯èƒ½å…¨éƒ½èƒ½ç”¨ä¸Š, å› æ­¤è‡ªè¡ŒæŸ¥é˜…
  - åŒæ—¶è¿›è¡Œ `computed` å’Œ `inject`: [computedInject](https://vueuse.org/core/computedInject/)
  - åœ¨ç»„ä»¶ä¸­åˆ›å»ºå¯å¤ç”¨çš„ template: [createReusableTemplate](https://vueuse.org/core/createReusableTemplate/)
  - åœ¨ç»„ä»¶ä¸­å°† template è®¾ç½®ä¸ºå¼‚æ­¥æ¸²æŸ“: [createAsyncComponent](https://vueuse.org/core/createAsyncComponent/)
  - å¯¹ `v-for` ç»‘å®š ref: [useTemplateRefsList](https://vueuse.org/core/useTemplateRefsList/)
  - è™šæ‹Ÿåˆ—è¡¨, ä»…æ¸²æŸ“å®é™…å¯è§çš„éƒ¨åˆ†: [vueVirtualScroller](https://github.com/Akryum/vue-virtual-scroller)

@vueuse/core - ç›‘å¬ (Watch)
: - è‡ªå·±å†™ä»£ç æ‰éœ€è¦, å¯èƒ½å…¨éƒ½èƒ½ç”¨ä¸Š, å› æ­¤è‡ªè¡ŒæŸ¥é˜…
  - ç­‰å¾…æ¡ä»¶æ»¡è¶³: [util](https://vueuse.org/shared/until/)
  - ç›‘å¬æ•°ç»„, ç›¸æ¯”äº `watch` è¿˜èƒ½å¾—åˆ°æ•°ç»„æ–°å¢å…ƒç´ å’Œç§»é™¤å…ƒç´ æƒ…å†µ: [watchArray](https://vueuse.org/shared/watchArray/)
  - ç›‘å¬æœ€å¤š n æ¬¡: [watchAtMost](https://vueuse.org/shared/watchAtMost/) å’Œ [watchOnce](https://vueuse.org/shared/watchOnce/)
  - é˜²æŠ–ç›‘å¬ (ä»…å½“ä¸€å®šæ—¶é—´å†…ç›‘å¬æ²¡è§¦å‘å, ç›‘å¬æ‰€å›è°ƒçš„å‡½æ•°æ‰ä¼šæ‰§è¡Œ): [watchDebounced](https://vueuse.org/shared/watchDebounced/)
  - èŠ‚æµç›‘å¬ (ä¸€å®šæ—¶é—´å†…ä»…èƒ½æ‰§è¡Œä¸€æ¬¡å‡½æ•°): [watchThrottled](https://vueuse.org/shared/watchThrottled/)
  - å¯åœ¨ä¸€å®šæƒ…å†µä¸‹å¿½ç•¥çš„ç›‘å¬: [watchIgnorable](https://vueuse.org/shared/watchIgnorable/)
  - å¯æš‚åœçš„ç›‘å¬: [watchPausable](https://vueuse.org/shared/watchPausable/)
  - å¯ä¸»åŠ¨è§¦å‘çš„ç›‘å¬: [watchTriggerable](https://vueuse.org/shared/watchTriggerable/)
  - ä»…åœ¨æ¡ä»¶æ»¡è¶³æ—¶æ‰è§¦å‘çš„ç›‘å¬: [watchWithFilter](https://vueuse.org/shared/watchWithFilter/)

@vueuse/core - å“åº”æ€§ (Reactivity)
: - è‡ªå·±å†™ä»£ç æ‰éœ€è¦, å¯èƒ½å…¨éƒ½èƒ½ç”¨ä¸Š, å› æ­¤è‡ªè¡ŒæŸ¥é˜…
  - å¼‚æ­¥çš„è®¡ç®—å±æ€§: [computedAsync](https://vueuse.org/core/computedAsync/)
  - è‡ªè¡Œå®šä¹‰ä¾èµ–é¡¹çš„è®¡ç®—å±æ€§: [computedWithControl](https://vueuse.org/shared/computedWithControl/)
  - å°†éå“åº”å¼å‡½æ•°è½¬æ¢ä¸ºå“åº”å¼å‡½æ•°: [reactify](https://vueuse.org/shared/reactify/)
  - å°†å¯¹è±¡å†…çš„éå“åº”å¼å‡½æ•°è½¬æ¢ä¸ºå“åº”å¼å‡½æ•°: [reactifyObject](https://vueuse.org/shared/reactifyObject/)
  - å“åº”æ€§åœ°å¿½ç•¥å“åº”å¼å¯¹è±¡ä¸­çš„æŸäº›å­—æ®µ: [reactiveOmit](https://vueuse.org/shared/reactiveOmit/)
  - å“åº”æ€§åœ°æå–å“åº”å¼å¯¹è±¡ä¸­çš„æŸäº›å­—æ®µ: [reactivePick](https://vueuse.org/shared/reactivePick/)
  - è¿‡æ®µæ—¶é—´åå°†ä¼šé‡ç½®æˆé»˜è®¤å€¼çš„ ref: [refAutoReset](https://vueuse.org/shared/refAutoReset/)
  - å¯ä»¥è‡ªè¡Œé‡ç½®æˆé»˜è®¤å€¼çš„ ref: [refManualReset](https://vueuse.org/shared/refManualReset/)
  - å¦‚æœå€¼ä¸º undefined åˆ™é‡‡ç”¨é»˜è®¤å€¼çš„ ref: [refDefault](https://vueuse.org/shared/refDefault/)
  - å…è®¸è‡ªè¡Œæ§åˆ¶æ˜¯å¦è§¦å‘å“åº”çš„ ref: [refWithControl](https://vueuse.org/shared/refWithControl/)
  - é˜²æŠ–å“åº” (ä»…å½“ä¸€å®šæ—¶é—´å†… ref æ²¡è¢«æ”¹å˜å, ref æ‰ä¼šè¢«ä¿®æ”¹): [refDebounced](https://vueuse.org/shared/refDebounced/)
  - èŠ‚æµå“åº” (ä¸€å®šæ—¶é—´å†… ref ä»…èƒ½è¢«ä¿®æ”¹ä¸€æ¬¡): [refThrottled](https://vueuse.org/shared/refThrottled/)
  - å°†ä¸¤ä¸ª ref çš„å“åº”æ€§åŒæ­¥, æŒ‡å‘åŒä¸€ä¸ªå“åº”æ€§å¯¹è±¡: [syncRef](https://vueuse.org/shared/syncRef/) å’Œ [syncRefs](https://vueuse.org/shared/syncRefs/)

@vueuse/core - æ•°ç»„ (Array)
: - è‡ªå·±å†™ä»£ç æ‰éœ€è¦, å¯èƒ½å…¨éƒ½èƒ½ç”¨ä¸Š, å› æ­¤è‡ªè¡ŒæŸ¥é˜…
  - ç®€å•åœ°è¯´å°±æ˜¯æ•°ç»„å„ä¸ªå‡½æ•°çš„å“åº”æ€§ç‰ˆæœ¬

@vueuse/core - Time (æ—¶é—´)
: - å€’è®¡æ—¶: [useCountdown](https://vueuse.org/core/useCountdown/)
  - æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´: [useDateFormat](https://vueuse.org/shared/useDateFormat/)
  - è®¡ç®—æ—¶é—´å·®: [useTimeAgo](https://vueuse.org/core/useTimeAgo/) å’Œ [useTimeAgoIntl](https://vueuse.org/core/useTimeDiff/)

@vueuse/core - å·¥å…· (Utilities)
: - è‡ªå·±å†™ä»£ç æ‰éœ€è¦, å¯èƒ½å…¨éƒ½èƒ½ç”¨ä¸Š, å› æ­¤è‡ªè¡ŒæŸ¥é˜…
  - è®©ä¸æ¥å— ref çš„å‡½æ•°èƒ½æ¥å— ref (ä½†ä¾æ—§ä¸æ˜¯å“åº”å¼æ‰§è¡Œ): [createUnrefFn](https://vueuse.org/core/createUnrefFn/)
  - è·å–å˜é‡çš„ base64 å­—ç¬¦ä¸²: [useBase64](https://vueuse.org/core/useBase64/)
  - è®¡æ•°å™¨: [useCounter](https://vueuse.org/shared/useCounter/)
  - ç¡®è®¤æ¡†: [useConfirmDialog](https://vueuse.org/core/useConfirmDialog/)
  - é˜²æŠ–æ‰§è¡Œ (ä»…å½“ä¸€å®šæ—¶é—´å†…ä¸è°ƒç”¨æŸä¸ªå‡½æ•°å, å‡½æ•°æ‰ä¼šæ‰§è¡Œ): [useDebounceFn](https://vueuse.org/shared/useDebounceFn/)
  - èŠ‚æµæ‰§è¡Œ (ä¸€å®šæ—¶é—´å†…ä»…èƒ½æ‰§è¡Œä¸€æ¬¡å‡½æ•°): [useThrottleFn](https://vueuse.org/shared/useThrottleFn/)
  - è®°å¿†æ‰§è¡Œ (æ‰§è¡Œå, ä»¥åå¯¹å‡½æ•°çš„è°ƒç”¨ç›´æ¥è¿”å›ç»“æœ): [useMemoize](https://vueuse.org/core/useMemoize/)
  - è®°å½• ref çš„ä¸Šä¸€ä¸ªå€¼ (éœ€è¦æå‰åˆ›å»º ref): [usePrevious](https://vueuse.org/core/usePrevious/)
  - å¤šæ­¥éª¤å‘å¯¼ç•Œé¢: [useStepper](https://vueuse.org/core/useStepper/)
  - å¼€å…³ boolean å€¼: [useToggle](https://vueuse.org/shared/useToggle/)
  - å“åº”å¼è½¬æ¢å­—ç¬¦ä¸²ä¸ºæ•°å­—: [useToNumber](https://vueuse.org/shared/useToNumber/)
  - å“åº”å¼è½¬æ¢æ•°å­—ä¸ºå­—ç¬¦ä¸²: [useToString](https://vueuse.org/shared/useToString/)

@vueuse/integrations
: - è¡¨å•æ£€éªŒ: [useAsyncValidator](https://vueuse.org/integrations/useAsyncValidator/)
  - è‡ªåŠ¨ç¼“å­˜æ•°æ®åˆ° indexedDB, å®ƒç›¸æ¯”äº useLocalStorage èƒ½å­˜å‚¨æ›´å¤šæ•°æ®: [useIDBKeyval](https://vueuse.org/integrations/useIDBKeyval/)
  - æ¨¡ç³Šæœç´¢: [useFuse](https://vueuse.org/integrations/useFuse/)
  - å¯è°ƒæ•´å…ƒç´ é¡ºåºçš„åˆ—è¡¨: [useSortable](https://vueuse.org/integrations/useSortable/)

@vueuse/sound
: - æ’­æ”¾å£°éŸ³: [useSound](https://github.com/vueuse/sound#examples)

<!-- markdownlint-enable MD032 MD007 -->
:::

### å‘å¸ƒä¼šè‡ªåŠ¨æ›´æ–°çš„å‰ç«¯ç•Œé¢ã€è„šæœ¬æˆ–ç¾åŒ–æ ·å¼

è¿˜è®°å¾—æˆ‘ä»¬æ˜¯å¦‚ä½•å®ç°å®æ—¶ä¿®æ”¹å‰ç«¯ç•Œé¢æˆ–è„šæœ¬çš„å—? æˆ‘ä»¬åˆ©ç”¨ {menuselection}`Go Live` å°†æœ¬åœ°æ–‡ä»¶å¤¹è½¬æ¢ä¸ºäº†ç½‘ç»œé“¾æ¥, è€Œæ­£åˆ™æˆ–è„šæœ¬é€šè¿‡ç½‘ç»œé“¾æ¥æ¥åŠ è½½æœ€æ–°æ‰“åŒ…å†…å®¹.

æ—¢ç„¶è¿™æ ·, æˆ‘ä»¬å®Œå…¨å¯ä»¥å‘å¸ƒä¸€ä¸ªç½‘ç»œé“¾æ¥ç»™ç©å®¶, ä»è€Œè®©ç©å®¶æ°¸è¿œåŠ è½½åˆ°æœ€æ–°çš„å‰ç«¯ç•Œé¢æˆ–è„šæœ¬!

:::{hint}
å¦‚æœä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨æ¥éƒ¨ç½²é“¾æ¥, è¯·æ³¨æ„è®¾ç½® https, å¦åˆ™ä½¿ç”¨ https çš„äº‘é…’é¦†ç©å®¶å°†ä¸å¯è®¿é—®.
:::

#### åˆ©ç”¨ github å’Œ jsdelivr

æœ€ç®€å•çš„æ–¹å¼æ˜¯åˆ©ç”¨ [jsdelivr](https://www.jsdelivr.com/) ä¸º github æ–‡ä»¶æä¾›çš„ CDN åŠŸèƒ½. å¯¹äºä¸Šä¼ åœ¨ `github.com/ç»„ç»‡å/ä»“åº“å` ä¸­ `è·¯å¾„` ä¸‹çš„æ–‡ä»¶, ä½ å¯ä»¥ç›´æ¥ç”¨ `https://testingcf.jsdelivr.net/gh/ç»„ç»‡å/ä»“åº“å/è·¯å¾„` æ¥è®¿é—®å®ƒä»¬.

é…’é¦†åŠ©æ‰‹å†…ç½®åº“å³é‡‡ç”¨äº†è¿™ç§æ–¹æ³•. ä¾‹å¦‚, å¦‚æœä½ ä»{menuselection}`é…’é¦†åŠ©æ‰‹ --> è„šæœ¬åº“ --> å†…ç½®åº“`ä¸­å¯¼å…¥[`æ ‡ç­¾åŒ–`](https://github.com/StageDog/tavern_resource/blob/main/src/é…’é¦†åŠ©æ‰‹/æ ‡ç­¾åŒ–/index.ts), ç¼–è¾‘å®ƒå°±ä¼šå‘ç°å®ƒçš„ä»£ç é‡Œä»…æœ‰ä¸€è¡Œ:

```js
import 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/é…’é¦†åŠ©æ‰‹/æ ‡ç­¾åŒ–/index.js'
```

è€Œå‰ç«¯ç•Œé¢å¯ä»¥å†™æˆ:

```html
<body>
<script>
  $('body').load('https://testingcf.jsdelivr.net/gh/lolo-desu/lolocard/dist/æ—¥è®°ç»œç»œ/ç•Œé¢/ä»‹ç»é¡µ/index.html')
</script>
</body>
```

ç”šè‡³, ä½ ä¹Ÿå¯ä»¥ç”¨ jsdelivr å‘å¸ƒä¼šè‡ªåŠ¨æ›´æ–°çš„é…’é¦†ç¾åŒ–:

```css
@import url("https://testingcf.jsdelivr.net/gh/lolo-desu/lolocard/src/æ€ç»´é“¾ç¾åŒ–/é…’é¦†è‡ªå¸¦æ¨ç†å—ç‰ˆ/æš—è‰².css");
```

ç„¶è€Œ, jsdelivr æœåŠ¡å™¨ã€jsdelivr é•œåƒæœåŠ¡å™¨ (ä¸ºäº†å›½å†…ç›´è¿) å’Œç©å®¶çš„æµè§ˆå™¨éƒ½ä¼šç¼“å­˜æ–‡ä»¶, å› æ­¤å¹¶ä¸æ˜¯ github ä¸Šæ–‡ä»¶æ›´æ–°å, è¿™ä¸ªé“¾æ¥å°±ä¼šç«‹å³å¾—åˆ°æœ€æ–°çš„æ‰“åŒ…ç»“æœ.

é™¤äº†ç­‰å¾…æœåŠ¡å™¨è‡ªè¡Œåˆ·æ–°ç¼“å­˜, ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥åŠ å¿«ç¼“å­˜åˆ·æ–°:

- ä» <https://github.com/StageDog/tavern_helper_template> {menuselection}`Use this template` æ¥åˆ›å»ºæ–°ä»“åº“è€Œä¸æ˜¯ä»…åœ¨æœ¬åœ°ä½¿ç”¨æ¨¡æ¿æ–‡ä»¶å¤¹, è¿™ä¸ªä»“åº“é…ç½®äº†è‡ªåŠ¨å·¥ä½œæµ, ä¼šè‡ªåŠ¨æ‰“åŒ…ç»“æœå¹¶åœ¨æ¯æ¬¡æ›´æ–°æ—¶éƒ½ä¿®æ”¹ç‰ˆæœ¬å·ï¼Œå¯ä»¥åšåˆ° 12h åˆ·æ–°æœåŠ¡å™¨ç¼“å­˜
- æ›´æ–°ç‰ˆæœ¬å·åï¼Œåœ¨ <https://www.testingcf.com/tools/purge> ä¸­è¾“å…¥é“¾æ¥, å°† `testingcf.jsdelivr` æ”¹æˆ `cdn.jsdelivr`, ç„¶åç‚¹å‡»ç¡®è®¤, èƒ½ç«‹å³åˆ·æ–° jsdelivr æœåŠ¡å™¨ç¼“å­˜, ä½†é•œåƒæœåŠ¡å™¨ç¼“å­˜ä¸ä¼šåˆ·æ–°
- ç©å®¶ä¸»åŠ¨æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

æˆ–è€…, ä½ å¯ä»¥æš‚æ—¶æ¢ä¸ªè¿˜æ²¡ç¼“å­˜ä½ æ–‡ä»¶çš„é•œåƒç½‘ç«™æ¥è®¿é—®:

```text
testingcf.jsdelivr.net
fastly.jsdelivr.net
gcore.jsdelivr.net
```

#### åˆ©ç”¨ cloudflare r2

cloudflare å…è´¹ä¸ºä½ æä¾›äº† 10GB å¯¹è±¡å­˜å‚¨æœåŠ¡, ä½ å¯ä»¥å°†å®ƒä½œä¸ºå›¾åºŠã€å‰ç«¯ç•Œé¢æˆ–è„šæœ¬çš„ä¸Šä¼ ä»“åº“â€¦â€¦å…·ä½“ç”¨æ³•è¯·åœ¨ç½‘ä¸Šæœç´¢æ•™ç¨‹.

### å…è®¸ä»£ç åˆ†å—

é»˜è®¤æƒ…å†µä¸‹, å‰ç«¯ç•Œé¢æˆ–è„šæœ¬ä¼šæ‰“åŒ…æˆå•ä¸ªæ–‡ä»¶, ä½†å¦‚æœä½ ä»¥ç½‘ç»œé“¾æ¥çš„å½¢å¼å‘å¸ƒå‰ç«¯ç•Œé¢æˆ–è„šæœ¬, åˆ™å¯ä»¥æ‰“åŒ…æˆå¤šä¸ªæ–‡ä»¶å—è®©ç©å®¶åœ¨æ¸¸ç©ä¸­æŒ‰éœ€åŠ è½½.

ä¸ºäº†å…è®¸ä»£ç åˆ†å—, ä½ éœ€è¦åˆ å» `webpack.config.ts` ä¸­çš„ `new webpack.optimize.LimitChunkCountPlugin({ maxChunks: 1 })` è¿™ä¸€å¥.

### ä¸è‡ªåŠ¨æ‰“åŒ…ä»£ç 

å¦‚æœä½ æ˜¯ä»æ¨¡æ¿æ–°å»ºä»“åº“çš„å½¢å¼ä½¿ç”¨ç¼–å†™æ¨¡æ¿, é‚£ä¹ˆå¯ä»¥åœ¨ `index.ts` ä¸­æ·»åŠ ä¸€è¡Œ `// @no-ci` æ¥æŒ‡ç¤º CI å·¥ä½œæµä¸è‡ªåŠ¨æ‰“åŒ…æŸä¸ªå‰ç«¯ç•Œé¢æˆ–è„šæœ¬.

### è‡ªå®šä¹‰ tailwindcss é…ç½®

tailwindcss æä¾›äº†è®¸å¤šç»„ä»¶ç±», å…è®¸ä½ ä¸æ€»æ˜¯è‡ªå®šä¹‰ç±»ç„¶åè®¾ç½®æ ·å¼:

::::{tabs}
:::{tab} ä¸ä½¿ç”¨ tailwindcss

```html
<p class="content-text">Hello, world!</p>
```

```css
.content-text {
  font-size: 30px;
  line-height: 36px;
  --tw-font-weight: 500;
  font-weight: 500;
  color: #030712;
}
```

:::

:::{tab} ä½¿ç”¨ tailwindcss

```html
<p class="text-3xl font-medium text-gray-950">Hello, world!</p>
```

:::
::::

æ¨¡æ¿å¹¶ä¸å¼ºåˆ¶ä½ ç”¨ tailwindcss, å› æ­¤æ²¡æœ‰å¼€å¯ tailwindcss å¾ˆå¤šæ£€æŸ¥. å¦‚æœéœ€è¦, ä½ å¯ä»¥è‡ªè¡Œå» eslint.config.mjs è°ƒæ•´å®ƒ.

```{code-block} ts
:emphasize-lines: 2,10-15,17-22,31
{
  files: ['src/**/*.{html,vue,js,ts}'],  // è°ƒæ•´æ£€æŸ¥èŒƒå›´
  plugins: {
    'better-tailwindcss': eslintPluginBetterTailwindcss,
  },
  rules: {
    ...eslintPluginBetterTailwindcss.configs['recommended-warn'].rules,
    ...eslintPluginBetterTailwindcss.configs['recommended-error'].rules,

    // class è¿‡é•¿æ—¶è‡ªåŠ¨æ¢è¡Œ
    //   è¿™å’Œ Ctrl + S æ‰€è§¦å‘çš„è‡ªåŠ¨æ ¼å¼åŒ–è½¯ä»¶ Prettier ç›¸å†²çª, éœ€è¦æ—¶å¿…é¡»åœ¨ html æ ‡ç­¾ä¸Šä¸€è¡ŒåŠ ä¸€å¥ <!-- prettier-ignore-attribute -->
    'better-tailwindcss/enforce-consistent-line-wrapping': [
      'off',  // æ”¹ä¸º `warn` æˆ– `error` åˆ™å¼€å¯
      { printWidth: 120 }
    ],

    // ç¦æ­¢åœ¨ html ä¸­ä½¿ç”¨æœªç» tailwindcss æ³¨å†Œçš„ç±»
    //   ç”±æ­¤, å¦‚æœå†™äº† tailwindcss ä¸æ”¯æŒçš„ç±», å°†ä¼šæŠ¥é”™
    'better-tailwindcss/no-unregistered-classes': [
      'off',
      { ignore: ['fa-*'] }  // FontAwesome å›¾æ ‡ç±»æ²¡æœ‰è¢« tailwindcss æ³¨å†Œ, æˆ‘ä»¬åº”è¯¥è®©æ£€æŸ¥å¿½ç•¥å®ƒé¿å…æŠ¥é”™
    ],
  },
  settings: {
    'better-tailwindcss': {
      entryPoint: 'src/global.css',
      tailwindConfig: 'tailwind.config.js',
    },
  },
},
// ä½ å¯ä»¥å¤åˆ¶ä¸Šé¢çš„ {} å—, é€šè¿‡æ”¹å˜ `files` ä¸ºä¸åŒèŒƒå›´è®¾ç½®ä¸åŒæ£€æŸ¥
```
